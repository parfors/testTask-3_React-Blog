"use strict";(self.webpackChunktest_tusk_3_react_blog=self.webpackChunktest_tusk_3_react_blog||[]).push([[496],{8496:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(9517),r=n(885),l=n(1413),i=n(184);function s(e){for(var t=e.isActive,n=e.setIsActive,r=e.blogsPerPage,s=e.totalBlogs,c=e.paginate,o=[],u=1;u<=Math.ceil(s/r);u++)o.push(u);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.PaginationListStyled,{children:o.map((function(e){return(0,i.jsx)(a.PaginationItemStyled,{children:(0,i.jsx)(a.PaginationLinkStyled,(0,l.Z)((0,l.Z)({},t===e?{active:!0}:{}),{},{onClick:function(){c(e),n(e)},children:e}))},e)}))})})}var c=["-",5,10,15,20],o=n(2791),u=n(9434),h=n(4627),g=n(4683),d=n(1620),x=n(6731);function f(){var e=(0,x.lr)({limit:1/0,page:1}),t=(0,r.Z)(e,2),n=t[0],l=t[1],f=n.get("page"),v=n.get("limit"),j=(0,u.I0)();(0,o.useEffect)((function(){j((0,h.L)({page:f,limit:v}))}),[j,v,f]);var p=(0,u.v9)(g._Z),m=(0,u.v9)(g.NU),y=(0,o.useState)(1),S=(0,r.Z)(y,2),b=S[0],L=S[1],Z=(0,o.useState)(!1),k=(0,r.Z)(Z,1)[0];console.log("Page".concat(f,", Limit ").concat(v)),console.log(p);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.BlogLabelStyled,{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0441\u0442\u043e\u0432 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435",(0,i.jsx)(a.BlogSelectStyled,{defaultValue:"-",onChange:function(e){l({page:1}),L(1),"-"!==e.target.value?l({limit:e.target.value}):l({limit:1/0})},children:c.map((function(e,t){return(0,i.jsx)(a.OptionStyled,{value:e,children:e},t)}))})]}),(0,i.jsx)(a.BlogListStyled,{children:(0,i.jsx)(i.Fragment,{children:p.map((function(e){var t=e._id,n=e.title,a=e.author,r=e.text,l=e.category,s=e.img,c=e.coverUrl;return(0,i.jsx)(d.Z,{id:t,title:n,author:a,text:r,category:l,img:s,coverUrl:c,isUsersBlogs:k},t)}))})}),(0,i.jsx)(s,{blogsPerPage:v,paginate:function(e){l({page:e,limit:v})},totalBlogs:m,isActive:b,setIsActive:L})]})}var v=["-","\u0411\u043e\u0435\u0432\u0438\u043a","\u041f\u0440\u0438\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f","\u0414\u0435\u0442\u0435\u043a\u0442\u0438\u0432","\u0424\u0435\u043d\u0442\u0430\u0437\u0438","\u0423\u0436\u0430\u0441\u044b"],j=n(1559),p=function(e,t){var n=(0,o.useState)((function(){var n;try{n=JSON.parse(localStorage.getItem(e))||t}catch(a){n=t}return n})),a=(0,r.Z)(n,2),l=a[0],i=a[1];return(0,o.useEffect)((function(){localStorage.setItem(e,JSON.stringify(l))}),[l,e]),[l,i]};function m(){var e=(0,u.I0)(),t=p("title",""),n=(0,r.Z)(t,2),a=n[0],l=n[1],s=p("author",""),c=(0,r.Z)(s,2),g=c[0],d=c[1],x=p("text",""),f=(0,r.Z)(x,2),m=f[0],y=f[1],S=(0,o.useState)(null),b=(0,r.Z)(S,2),L=b[0],Z=b[1],k=(0,o.useState)("-"),C=(0,r.Z)(k,2),P=C[0],_=C[1],I=function(e){var t=e.target.name,n=e.target.value;switch(t){case"title":l(n);break;case"author":d(n);break;case"text":y(n);break;case"category":_(n);break;default:return}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(j.tN,{onSubmit:function(t){if(t.preventDefault(),a&&m&&g){var n;n="-"===P?"":P;var r=new FormData;r.append("title",a),r.append("author",g),r.append("text",m),r.append("category",n.toLocaleLowerCase()),r.append("cover",L),e((0,h.bl)(r)),y(""),l(""),d(""),_("-")}else alert("Please fill in all fields")},enctype:"multipart/form-data",children:[(0,i.jsxs)(j.vJ,{children:[(0,i.jsxs)(j.SP,{children:[(0,i.jsxs)(j.L1,{children:[(0,i.jsx)(j.h9,{children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),(0,i.jsx)(j.Me,{type:"text",onChange:I,name:"title",value:a})]}),(0,i.jsxs)(j.L1,{children:[(0,i.jsx)(j.h9,{children:"\u0410\u0432\u0442\u043e\u0440"}),(0,i.jsx)(j.Me,{type:"text",onChange:I,name:"author",value:g})]}),(0,i.jsxs)(j.L1,{children:[(0,i.jsx)(j.h9,{children:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430"}),(0,i.jsx)(j.Me,{type:"file",onChange:function(e){e.preventDefault();var t=e.target.files[0];t&&Z(t)},name:"cover"})]}),(0,i.jsxs)(j.L1,{children:[(0,i.jsx)(j.h9,{children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,i.jsx)(j.W$,{onChange:I,name:"category",value:P,children:v.map((function(e){return(0,i.jsx)(j.Jo,{value:e,children:e},e.length)}))})]})]}),(0,i.jsx)(j.gL,{children:(0,i.jsxs)(j.L1,{children:[(0,i.jsx)(j.h9,{children:"\u0422\u0435\u043a\u0441\u0442"}),(0,i.jsx)(j.h5,{placeholder:"\u0427\u0442\u043e \u0443 \u0432\u0430\u0441 \u043d\u043e\u0432\u043e\u0433\u043e?",onChange:I,name:"text",value:m})]})})]}),(0,i.jsx)(j.OQ,{type:"submit",children:"\u0414\u043e\u0431\u0438\u0432\u0438\u0442\u044c"})]})})}function y(){var e=(0,u.v9)(g.M7);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.ContainerStyled,{children:[e&&(0,i.jsx)(m,{}),(0,i.jsx)(f,{})]})})}}}]);
//# sourceMappingURL=496.5562f7b0.chunk.js.map